load CardDeck
disp('Welcome to Blackjack! You are currently playing against the MATLAB dealer')
disp('There is a dealer and a player')
disp('There are 52 cards in the deck')
disp('Aces may be counted as either 1 or 11 points')
disp('Cards 2-10 are scored as their numerical value')
disp('All face cards are counted as 10 points')
disp('Value of a hand is the sum of the point values of the cards')
disp('The goal of the game is to reach 21 points without exceeding 21') 
disp('If you exceed 21 player loses and dealer wins') 
disp('If you get 21 points across the first card, you win instantly unless the dealer also gets the same (called a blackjack)')
disp('When the player or the dealer reaches exactly 21 points, the game ends.')


money = 10

Player1 = input('What is your name?: ','s');

while new_game == 'yes'
    bet = input('\n[Dealer]: How many MATLAB coins would you want to bet? (please type a positive integer, greater than 0):');
    money = money - bet;
    fprintf('you have %4.0f coins left',money)
    dealer_total = 0
    player_total = 0

%initilizing card variables

    ShuffledDeck=randperm(52)
    dealer_total = 0;
    player_total = 0;
    next_face_up = 5;
    Player_Cards = ShuffledDeck(1,3)
    Dealer_Cards = ShuffledDeck(2,4)
    imshow([BlueDeck{Player_Cards}])
    imshow([BlueDeck{Dealer_Cards}])
    
    %convert to card value
    fprintf('You have %3.0f total, while the dealer has %3.0f', player_total, dealer_total)
    while Player1_total<21 & Dealer_total<21      
        question = input('Would you like to hit or stay?(type h or s)',s);
      if question == 'h'
            Player_Cards = [Player_Cards], ShuffledDeck(next_face_up) 
            next_face_up = next_face_up + 1
            Dealer_Cards = [Dealer_cards], ShuffledDeck(next_face_up) 
            next_face_up = next_face_up + 1
            imshow([BlueDeck{Player_Cards}])
            imshow([BlueDeck{Dealer_Cards}])
            %convert to card value
            fprintf('You have %3.0f total, while the dealer has %3.0f', playertotal, dealer_total)
        
      if question == 's'
        %while dealer_total is less than 17
            Dealer_Cards = [Dealer_cards], ShuffledDeck(next_face_up)
            next_face_up = next_face_up + 1
            imshow([BlueDeck{Dealer_Cards}])            
      if dealer_total == 21
        fprintf('The Dealer wins!')    
      end
      if player_total == 21
        fprintf('You Win!')
      end
      if player_total > 21
        fprintf('The Dealer Wins!')
      end
      if dealer_total > 21
        fprintf('You Win!')
      end
      if dealer_total == player_total
        fprintf('Draw!')
      end
      if player_total > dealer_total
        fprintf('You Win!')
      end
      if dealer_total > player_total
        fprintf('The Dealer Wins!')
      end        
    new_game = input('Do you want to play again?',s)
end
      end
    end
end
